package com.hackerrank;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/*
 * You are given an array and you need to find number of tripets of indices (i,j,k) such that the elements at those indices are in geometric progression for a given 
 * common ratio r and i<j<k.

For example, arr[1,4,16,64] . If r=4, we have [1,4,16] and [4,16,64]
 */
public class HashMap04 {

	static long countTriplets(List<Long> arr, long r) {
		
		Map<Long, Long> map = new HashMap<Long, Long>();
		long size = arr.size();
		for(int i=0;i<size;i++){
			Long key = arr.get(i);
			Long value = map.get(key);
			if(value==null)
				map.put(key, 1L);
			else
				map.put(key, ++value);
		}
		Long one=0L, ans=0L, two, three;
		
		for(int i=0;i<size;i++){
			one = arr.get(i);
			Long temp = map.get(one);
			if(temp==-1)
				continue;
			two = map.get(one*r);
			three = map.get(one*r*r);
			if(two!=null && three!=null){
				ans+=(temp*two*three);
				map.put(one, -1L);
			}
		}
		return ans;
    }
	
	public static void main(String[] args) throws IOException {
        
		List<Long> arr = new ArrayList<Long>();
		arr.add(1L);
		arr.add(3L);
		arr.add(9L);
		arr.add(9L);
		arr.add(27L);
		arr.add(81L);
		int r=3;
        long ans = countTriplets(arr, r);

       System.out.println(ans);
    }
}
