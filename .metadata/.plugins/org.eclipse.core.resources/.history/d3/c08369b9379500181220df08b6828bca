package com.booking.interviewexperience;

import java.io.IOException;
import java.io.RandomAccessFile;

public class Q7_LastNLines {

	public static void main(String[] args) {

		try {
			StringBuilder builder = new StringBuilder();
			RandomAccessFile raf = new RandomAccessFile(
					"C:\\Users\\Hitesh\\workspace\\Test\\Booking\\src\\com\\booking\\interviewexperience\\Q1_Logs.txt", "r");
			long last = raf.length() - 1;
			int n = 4;

			for(long pointer = last; pointer >= 0; pointer--) {
				raf.seek(pointer);
				char c = (char) raf.read();
				if (c == '\n' && n==0) {
					break;
				}
				if (c == '\n'){
					n--;
					builder.reverse();
					System.out.println(builder.toString());
					builder = new StringBuilder();
					pointer--;
					continue;
				}
				builder.append(c);
			}
		} catch (IOException e) {
			e.printStackTrace();
		}
	}

}

/*
 * thisCode = randomFile.readByte(); thisChar = (char) thisCode;
 * 
 * if (thisChar == 10 || position==0) { if (position == 0)
 * randomFile.seek(position); thisLine = randomFile.readLine(); if (thisLine !=
 * null) { int i = thisLine.indexOf(" "); if (i&gt;0) { String id =
 * thisLine.substring(0, i); if (thisLine.contains("ERROR") ||
 * id.equalsIgnoreCase(reqId)) { reqId = id; System.out.println(thisLine); } } }
 * 
 * } position--;
 */